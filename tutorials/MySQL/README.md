# 数据库总览

[返回列表](https://github.com/EmonCodingBackEnd/backend-tutorial)

# 事务

事务Transaction的简写成tx的原因：

transaction的读法是`/træn'zækʃən/`

x的读法是/ɛks/

所以tx分别代表：t - tran; x-saction

# 分布式事务

- 处理方案或协议

  - `XA`: 协议（一种协议规范）（数据库层面支持，性能一般不够，但非高并发场景也没问题）
  - `TCC`:特点在于业务资源检查与加锁，一阶段进行校验，资源锁定，如果第一阶段都成功，二阶段对锁定资源进行交易逻辑，否则，对锁定资源进行释放。*应用实施成本较高*。（业务入侵）
  - `Saga`: 核心就是补偿，一阶段就是服务的正常顺序调用（数据库事务正常提交），如果都执行成功，则第二阶段则什么都不做；但如果其中有执行发生异常，则依次调用其补偿服务（一般多逆序调用已执行服务的反交易）来保证整个交易的一致性。*应用实施成本一般*。（业务入侵）

  - `事务消息`: 基于可靠消息最终一致，一阶段服务正常调用，同时同事务记录消息表，二阶段则进行消息的投递，消费。*应用实施成本较低*。（不适用于业务上允许补偿回滚的场景）（无业务入侵）
  - `两阶段提交`:

- Seata架构支持的方式（Simple Extensible Autonomous Transaction Architecture）

  - `AT(Automatic Transaction)`:Seata对TCC模式的一种对业务0入侵的解决方案。(无业务入侵）【推荐】
  - `TCC模式`:(业务入侵）
  - `Saga模式`:(业务入侵）
  - `XA`:(无业务入侵）
  - `事务消息`:（无业务入侵）